import { call, put, all, takeLatest } from 'redux-saga/effects';
import api from 'services/api';
import { Creators as {{ properCase name }}Creators, Types as {{ properCase name }}Types } from 'store/ducks/{{ camelCase name }}';

export function* get{{ properCase name }}({ payload: { field1, field2 } }) {
  try {
    const response = yield call(api.post, '/myApi', {
      field1,
      field2,
    });
    yield put({{ properCase name }}Creators.get{{ properCase name }}Success(response.data));
  } catch (err) {
    yield put({{ properCase name }}Creators.get{{ properCase name }}Failure('Erro ao buscar dados da API'));
  }
}

export default function* {{ properCase name }}Sagas() {
  yield all([takeLatest({{ properCase name }}Types.GET_REQUEST, get{{ properCase name }})]);
}
